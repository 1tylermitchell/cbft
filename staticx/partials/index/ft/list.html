<ol ng-if="indexNames.length"
    class="breadcrumb">
  <li><span class="glyphicon glyphicon-book"></li>
  <li><a href="#">Indexes</a></li>
</ol>

<div ng-show="errorMessage" class="alert alert-danger ng-cloak" role="alert">
  {{errorMessage}}
</div>

<div ng-if="indexNames.length">
 <div class="listIndexes">
  <h2>Indexes</h2>
  <table class="table table-striped">
    <tr>
        <th nowrap>Index Name</th>
        <th nowrap width="99%">Bucket</th>
        <th nowrap></th>
    </tr>
    <tr ng-repeat="(indexName, indexDef) in indexDefs"
        ng-if="indexDef.type != 'alias'">
        <td nowrap><a href="/indexes/{{indexName}}">{{indexName}}</a></td>
        <td nowrap>
          <span ng-if="indexDef.sourceType != 'couchbase'">
            {{indexDef.sourceType}}
            &nbsp;/&nbsp;
          </span>
          {{indexDef.sourceName}}
        </td>
        <td nowrap>
            <button ng-click="editIndex(indexName)"
                    type="button" class="btn btn-default btn-sm">
                <span class="glyphicon glyphicon-edit"></span> edit
            </button>
            <button ng-click="cloneIndex(indexName)"
                    type="button" class="btn btn-default btn-sm">
                <span class="glyphicon glyphicon-plus-sign"></span> clone
            </button>
            <button ng-click="deleteIndex(indexName)"
                    type="button" class="btn btn-default btn-sm">
                <span class="glyphicon glyphicon-trash"></span>
            </button>
        </td>
    </tr>
  </table>

  <div class="input-group">
    <a href="/indexes/_new?indexType=bleve&sourceType=couchbase">
      <button class="btn btn-primary" type="submit">
        <i class="glyphicon glyphicon-plus"></i> New Index
      </button>
    </a>
  </div>
 </div>

 <div class="listIndexAliases">
  <h2>Index Aliases</h2>
  <table class="table table-striped">
    <tr>
        <th nowrap>Index Alias Name</th>
        <th nowrap width="99%">Target Indexes</th>
        <th nowrap></th>
    </tr>
    <tr ng-repeat="(indexName, indexDef) in indexDefs"
        ng-if="indexDef.type == 'alias'">
        <td nowrap><a href="/indexes/{{indexName}}">{{indexName}}</a></td>
        <td>
          <span ng-repeat="(targetName, targetObj) in indexDef.paramsObj.targets">
            <a href="/indexes/{{targetName}}">
              {{targetName}}
            </a><span ng-show="!$last">, </span>
          </span>
        </td>
        <td nowrap>
            <button ng-click="editIndex(indexName)"
                    type="button" class="btn btn-default btn-sm">
                <span class="glyphicon glyphicon-edit"></span> edit
            </button>
            <button ng-click="cloneIndex(indexName)"
                    type="button" class="btn btn-default btn-sm">
                <span class="glyphicon glyphicon-plus-sign"></span> clone
            </button>
            <button ng-click="deleteIndex(indexName)"
                    type="button" class="btn btn-default btn-sm">
                <span class="glyphicon glyphicon-trash"></span>
            </button>
        </td>
    </tr>
  </table>

  <div class="input-group">
    <a href="/indexes/_new?indexType=alias&sourceType=nil">
      <button class="btn btn-primary" type="submit">
        <i class="glyphicon glyphicon-plus"></i> New Index Alias
      </button>
    </a>
  </div>
 </div>
</div>

<div ng-if="!indexNames.length">
  <div ng-include="'/static/partials/index/start.html'"/>

  <div class="input-group">
    <a href="/indexes/_new?indexType=bleve&sourceType=couchbase">
      <button class="btn btn-primary" type="submit">
        <i class="glyphicon glyphicon-plus"></i> New Index
      </button>
    </a>
  </div>
</div>

<style>
.listIndexes, .listIndexAliases {
  padding-bottom: 30px;
}

.listIndexes table tr td, .listIndexesAliases table tr td,
.listIndexes table tr th, .listIndexesAliases table tr th {
  white-space: nowrap;
}
</style>
